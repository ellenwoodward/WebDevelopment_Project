function updateCart(){cartEmpty.innerHTML="",renderCartItems(),renderSubTotal(),displayTotal(),localStorage.getItem("total")<1&&cartIsEmpty()}function cartIsEmpty(){innerHtml="",cartEmpty.innerHTML='<img class="emptycart" src="images/emptycart.png" alt="empty cart">\n  <h1 class="text-center">Cart is empty!</h1>\n  <h6 class="text-center">Add something to make me happy :)</h6>\n  <br><br>'}function renderCartItems(){cartDiv.innerHTML="",cart.forEach(t=>{cartDiv.innerHTML+=`\n      <div class="card rounded-3 mb-4">\n      <div class="card-body p-4">\n        <div class="row d-flex justify-content-between align-items-center">\n          <div class="col-md-2 col-lg-2 col-xl-2">\n            <img\n              src="${t.imgSrc}"\n              class="img-fluid rounded-3" alt="game">\n          </div>\n          <div class="col-md-3 col-lg-3 col-xl-3">\n            <p class="lead fw-normal mb-2">${t.name}</p>\n          </div>\n          <div class="col-md-3 col-lg-3 col-xl-2 d-flex">\n            <button class="btn btn-link px-2"\n              onclick="changeNumberofUnits('minus', ${t.id})">\n              <i class="fas fa-minus"></i>\n            </button>\n\n            <input id="form1" min="0" name="quantity" value="${t.units}" readonly\n              class="form-control form-control-sm" />\n\n            <button class="btn btn-link px-2"\n              onclick="changeNumberofUnits('plus', ${t.id})">\n              <i class="fas fa-plus"></i>\n            </button>\n          </div>\n          <div class="col-md-3 col-lg-2 col-xl-2 offset-lg-1">\n            <h5 class="mb-0">&euro;${t.price*t.units}</h5>\n          </div>\n          <div class="col-md-1 col-lg-1 col-xl-1 text-end">\n            <a href="#!" onclick="removeItemFromCart(${t.id})" class="text-danger"><i class="fas fa-trash fa-lg"></i></a>\n          </div>\n        </div>\n      </div>\n    </div>`})}function removeItemFromCart(t){cart.forEach(e=>{if(e.id===t){let a=e.units;cart=cart.filter(e=>e.id!==t),localStorage.setItem("cart",JSON.stringify(cart)),editTotal(a)}})}function editTotal(t){let e=localStorage.getItem("total");localStorage.setItem("total",e-t),updateCart()}function renderSubTotal(){let t=0,e=localStorage.getItem("total");cart.forEach(e=>{t+=e.price*e.units}),subtotal.innerHTML=`Subtotal (${e} items): &euro;${t.toFixed(2)}`,localStorage.setItem("subtotal",t)}function changeNumberofUnits(t,e){cart=cart.map(a=>{let n=a.units;return a.id===e&&("plus"===t?(n++,changeTotalItems("plus")):"minus"===t&&n>1?(n--,changeTotalItems("minus")):alert("Invalid Number of Item!")),{...a,units:n}}),localStorage.setItem("cart",JSON.stringify(cart)),updateCart()}function changeTotalItems(t){let e=localStorage.getItem("total");"plus"===t?e++:"minus"===t?e--:"empty"===t&&(e=0),localStorage.setItem("total",e),displayTotal()}function emptyCart(){cart=[],localStorage.setItem("cart",JSON.stringify(cart)),changeTotalItems("empty"),updateCart(),cartIsEmpty()}function goToPayment(){let t=localStorage.getItem("total");"false"===isloggedIn?(message.innerHTML="",message.innerHTML+='\n        <br>\n        <br>\n        <div class="alert alert-danger text-center mb-3" id="payment-failure" role="alert">\n        Please <a href="login.html">login</a> before proceeding!\n        </div>\n        '):t<1?(message.innerHTML="",message.innerHTML+='\n        <br>\n        <br>\n        <div class="alert alert-danger text-center mb-3" id="payment-failure" role="alert">\n        Please add something to your cart!\n        </div>\n        '):document.location.href="payment.html"}let cart=JSON.parse(localStorage.getItem("cart")),cartDiv=document.getElementById("cartDiv"),deleteCart=document.getElementById("delete-cart").addEventListener("click",emptyCart,!1),total=document.getElementById("total"),subtotal=document.getElementById("subtotal"),cartEmpty=document.getElementById("cart-empty"),message=document.getElementById("message"),payBtn=document.getElementById("go-to-pay").addEventListener("click",goToPayment,!1);0==localStorage.getItem("total")?cartIsEmpty():updateCart();